import{_ as e}from"./uni-icons.CgWjhjcc.js";import{j as t,a as s,c as o,w as i,k as l,z as a,A as n,B as r,y as c,e as u,t as h,b as d,F as p,U as f,V as m,q as y,i as g}from"./index-s7dVK2Yt.js";import{_ as x,r as b}from"./_plugin-vue_export-helper.Dqy1JZYP.js";function S(e){let t="";for(let s in e){t+=`${s}:${e[s]};`}return t}const k=x({name:"uni-easyinput",emits:["click","iconClick","update:modelValue","input","focus","blur","confirm","clear","eyes","change","keyboardheightchange","inputClick"],model:{prop:"modelValue",event:"update:modelValue"},options:{virtualHost:!0},inject:{form:{from:"uniForm",default:null},formItem:{from:"uniFormItem",default:null}},props:{name:String,value:[Number,String],modelValue:[Number,String],type:{type:String,default:"text"},clearable:{type:Boolean,default:!0},autoHeight:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入"},placeholderStyle:String,focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},showNum:{type:Boolean,default:!1},confirmType:{type:String,default:"done"},clearSize:{type:[Number,String],default:24},inputBorder:{type:Boolean,default:!0},prefixIcon:{type:String,default:""},suffixIcon:{type:String,default:""},trim:{type:[Boolean,String],default:!1},cursorSpacing:{type:Number,default:0},passwordIcon:{type:Boolean,default:!0},adjustPosition:{type:Boolean,default:!0},primaryColor:{type:String,default:"#2979ff"},styles:{type:Object,default:()=>({color:"#333",backgroundColor:"#fff",disableColor:"#F7F6F6",borderColor:"#e5e5e5"})},errorMessage:{type:[String,Boolean],default:""},inputType:{type:String,default:"input"},showSelectIcon:{type:Boolean,default:!0}},data:()=>({focused:!1,val:"",showMsg:"",border:!1,isFirstBorder:!1,showClearIcon:!1,showPassword:!1,focusShow:!1,localMsg:"",isEnter:!1}),computed:{isVal(){const e=this.val;return!(!e&&0!==e)},msg(){return this.localMsg||this.errorMessage},inputMaxlength(){return Number(this.maxlength)},boxStyle(){return`color:${this.inputBorder&&this.msg?"#e43d33":this.styles.color};`},inputContentClass(){return function(e){let t="";for(let s in e)e[s]&&(t+=`${s} `);return t}({"is-input-border":this.inputBorder,"is-input-error-border":this.inputBorder&&this.msg,"is-textarea":"textarea"===this.type,"is-disabled":this.disabled,"is-focused":this.focusShow})},inputContentStyle(){const e=this.focusShow?this.primaryColor:this.styles.borderColor;return S({"border-color":(this.inputBorder&&this.msg?"#dd524d":e)||"#e5e5e5","background-color":this.disabled?this.styles.disableColor:this.styles.backgroundColor})},inputStyle(){return S({"padding-right":"password"===this.type||this.clearable||this.prefixIcon?"":"10px","padding-left":this.prefixIcon?"":"10px"})}},watch:{value(e){this.val=null!==e?e:""},modelValue(e){this.val=null!==e?e:""},focus(e){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))}},created(){this.init(),this.form&&this.formItem&&this.$watch("formItem.errMsg",(e=>{this.localMsg=e}))},mounted(){this.$nextTick((()=>{this.focused=this.focus,this.focusShow=this.focus}))},methods:{_Click(){this.$emit("inputClick")},init(){this.value||0===this.value?this.val=this.value:this.modelValue||0===this.modelValue||""===this.modelValue?this.val=this.modelValue:this.val=""},onClickIcon(e){this.$emit("iconClick",e)},onEyes(){this.showPassword=!this.showPassword,this.$emit("eyes",this.showPassword)},onInput(e){let t=e.detail.value;this.trim&&("boolean"==typeof this.trim&&this.trim&&(t=this.trimStr(t)),"string"==typeof this.trim&&(t=this.trimStr(t,this.trim))),this.errMsg&&(this.errMsg=""),this.val=t,this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(){this.$nextTick((()=>{this.focused=!0})),this.$emit("focus",null)},_Focus(e){this.focusShow=!0,this.$emit("focus",e)},onBlur(){this.focused=!1,this.$emit("blur",null)},_Blur(e){if(e.detail.value,this.focusShow=!1,this.$emit("blur",e),!1===this.isEnter&&this.$emit("change",this.val),this.form&&this.formItem){const{validateTrigger:e}=this.form;"blur"===e&&this.formItem.onFieldChange()}},onConfirm(e){this.$emit("confirm",this.val),this.isEnter=!0,this.$emit("change",this.val),this.$nextTick((()=>{this.isEnter=!1}))},onClear(e){this.val="",this.$emit("input",""),this.$emit("update:modelValue",""),this.$emit("clear")},onkeyboardheightchange(e){this.$emit("keyboardheightchange",e)},trimStr:(e,t="both")=>"both"===t?e.trim():"left"===t?e.trimLeft():"right"===t?e.trimRight():"start"===t?e.trimStart():"end"===t?e.trimEnd():"all"===t?e.replace(/\s+/g,""):e}},[["render",function(x,S,k,C,w,v){const I=b(t("uni-icons"),e),_=f,B=m,$=y,F=g;return s(),o(F,{class:a(["uni-easyinput",{"uni-easyinput-error":v.msg}]),style:n(v.boxStyle)},{default:i((()=>[l(F,{class:a(["uni-easyinput__content",v.inputContentClass]),style:n(v.inputContentStyle)},{default:i((()=>[k.prefixIcon?(s(),o(I,{key:0,class:"content-clear-icon",type:k.prefixIcon,color:"#c0c4cc",onClick:S[0]||(S[0]=e=>v.onClickIcon("prefix")),size:"22"},null,8,["type"])):r("",!0),c(x.$slots,"left",{},void 0,!0),l(F,{style:{width:"100%",display:"flex","align-items":"center"},onClick:v._Click},{default:i((()=>["textarea"===k.type?(s(),o(_,{key:0,class:a(["uni-easyinput__content-textarea",{"input-padding":k.inputBorder,"pev-none":"falseInput"===k.inputType}]),name:k.name,value:w.val,placeholder:k.placeholder,placeholderStyle:k.placeholderStyle,disabled:k.disabled,"placeholder-class":"uni-easyinput__placeholder-class",maxlength:v.inputMaxlength,focus:w.focused,autoHeight:k.autoHeight,"cursor-spacing":k.cursorSpacing,"adjust-position":k.adjustPosition,onInput:v.onInput,onBlur:v._Blur,onFocus:v._Focus,onConfirm:v.onConfirm,onKeyboardheightchange:v.onkeyboardheightchange},null,8,["class","name","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","cursor-spacing","adjust-position","onInput","onBlur","onFocus","onConfirm","onKeyboardheightchange"])):(s(),o(B,{key:1,type:"password"===k.type?"text":k.type,class:a(["uni-easyinput__content-input",{"pev-none":"falseInput"===k.inputType}]),style:n(v.inputStyle),name:k.name,value:w.val,password:!w.showPassword&&"password"===k.type,placeholder:k.placeholder,placeholderStyle:k.placeholderStyle,"placeholder-class":"uni-easyinput__placeholder-class",disabled:k.disabled,maxlength:v.inputMaxlength,focus:w.focused,confirmType:k.confirmType,"cursor-spacing":k.cursorSpacing,"adjust-position":k.adjustPosition,onFocus:v._Focus,onBlur:v._Blur,onInput:v.onInput,onConfirm:v.onConfirm,onKeyboardheightchange:v.onkeyboardheightchange},null,8,["type","class","style","name","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","cursor-spacing","adjust-position","onFocus","onBlur","onInput","onConfirm","onKeyboardheightchange"])),k.showNum&&k.maxlength&&"textarea"!==k.type?(s(),o($,{key:2,class:"text_maxlength_show"},{default:i((()=>[u(h(w.val.length)+"/"+h(k.maxlength),1)])),_:1})):r("",!0),k.showNum&&k.maxlength&&"textarea"===k.type?(s(),o($,{key:3,class:"textarea_maxlength_show"},{default:i((()=>[u(h(w.val.length)+"/"+h(k.maxlength),1)])),_:1})):r("",!0),"falseInput"===k.inputType&&k.showSelectIcon?(s(),d(p,{key:4},[w.val||k.disabled?r("",!0):(s(),o(I,{key:0,style:{"margin-right":"5px"},type:"bottom",size:14,color:"#999"}))],64)):r("",!0)])),_:1},8,["onClick"]),"password"===k.type&&k.passwordIcon?(s(),d(p,{key:1},[v.isVal?(s(),o(I,{key:0,class:a(["content-clear-icon",{"is-textarea-icon":"textarea"===k.type}]),type:w.showPassword?"eye-slash-filled":"eye-filled",size:22,color:w.focusShow?k.primaryColor:"#c0c4cc",onClick:v.onEyes},null,8,["class","type","color","onClick"])):r("",!0)],64)):r("",!0),k.suffixIcon?(s(),d(p,{key:2},[k.suffixIcon?(s(),o(I,{key:0,class:"content-clear-icon",type:k.suffixIcon,color:"#c0c4cc",onClick:S[1]||(S[1]=e=>v.onClickIcon("suffix")),size:"22"},null,8,["type"])):r("",!0)],64)):(s(),d(p,{key:3},[k.clearable&&v.isVal&&!k.disabled&&"textarea"!==k.type?(s(),o(I,{key:0,class:a(["content-clear-icon",{"is-textarea-icon":"textarea"===k.type}]),type:"clear",size:k.clearSize,color:v.msg?"#dd524d":w.focusShow?k.primaryColor:"#c0c4cc",onClick:v.onClear},null,8,["class","size","color","onClick"])):r("",!0)],64)),c(x.$slots,"right",{},void 0,!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}],["__scopeId","data-v-54ffc259"]]);export{k as _};

import{Y as e,Z as a,j as l,a as t,c as s,w as r,k as c,A as o,y as n,e as u,t as i,B as h,i as d,V as p,q as m,r as f,h as v,G as y,o as g,I as b,S as _,H as x,E as w,b as V,d as S,F as k,p as z}from"./index-s7dVK2Yt.js";import{_ as C}from"./uni-icons.CgWjhjcc.js";import{_ as $,r as T}from"./_plugin-vue_export-helper.Dqy1JZYP.js";import{_ as B}from"./uni-load-more.Ck2o4qom.js";const F={en:{"uni-search-bar.cancel":"cancel","uni-search-bar.placeholder":"Search enter content"},"zh-Hans":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"请输入搜索内容"},"zh-Hant":{"uni-search-bar.cancel":"取消","uni-search-bar.placeholder":"請輸入搜索內容"}},{t:H}=e(F);const I=$({name:"UniSearchBar",emits:["input","update:modelValue","clear","cancel","confirm","blur","focus"],props:{placeholder:{type:String,default:""},radius:{type:[Number,String],default:5},clearButton:{type:String,default:"auto"},cancelButton:{type:String,default:"auto"},cancelText:{type:String,default:""},bgColor:{type:String,default:"#F8F8F8"},textColor:{type:String,default:"#000000"},maxlength:{type:[Number,String],default:100},value:{type:[Number,String],default:""},modelValue:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data:()=>({show:!1,showSync:!1,searchVal:""}),computed:{cancelTextI18n(){return this.cancelText||H("uni-search-bar.cancel")},placeholderText(){return this.placeholder||H("uni-search-bar.placeholder")}},watch:{modelValue:{immediate:!0,handler(e){this.searchVal=e,e&&(this.show=!0)}},focus:{immediate:!0,handler(e){if(e){if(this.readonly)return;this.show=!0,this.$nextTick((()=>{this.showSync=!0}))}}},searchVal(e,a){this.$emit("input",e),this.$emit("update:modelValue",e)}},methods:{searchClick(){this.readonly||this.show||(this.show=!0,this.$nextTick((()=>{this.showSync=!0})))},clear(){this.searchVal="",this.$nextTick((()=>{this.$emit("clear",{value:""})}))},cancel(){this.readonly||(this.$emit("cancel",{value:this.searchVal}),this.searchVal="",this.show=!1,this.showSync=!1,a())},confirm(){a(),this.$emit("confirm",{value:this.searchVal})},blur(){a(),this.$emit("blur",{value:this.searchVal})},emitFocus(e){this.$emit("focus",e.detail)}}},[["render",function(e,a,f,v,y,g){const b=T(l("uni-icons"),C),_=d,x=p,w=m;return t(),s(_,{class:"uni-searchbar"},{default:r((()=>[c(_,{style:o({borderRadius:f.radius+"px",backgroundColor:f.bgColor}),class:"uni-searchbar__box",onClick:g.searchClick},{default:r((()=>[c(_,{class:"uni-searchbar__box-icon-search"},{default:r((()=>[n(e.$slots,"searchIcon",{},(()=>[c(b,{color:"#c0c4cc",size:"18",type:"search"})]),!0)])),_:3}),y.show||y.searchVal?(t(),s(x,{key:0,focus:y.showSync,disabled:f.readonly,placeholder:g.placeholderText,maxlength:f.maxlength,class:"uni-searchbar__box-search-input","confirm-type":"search",type:"text",modelValue:y.searchVal,"onUpdate:modelValue":a[0]||(a[0]=e=>y.searchVal=e),style:o({color:f.textColor}),onConfirm:g.confirm,onBlur:g.blur,onFocus:g.emitFocus},null,8,["focus","disabled","placeholder","maxlength","modelValue","style","onConfirm","onBlur","onFocus"])):(t(),s(w,{key:1,class:"uni-searchbar__text-placeholder"},{default:r((()=>[u(i(f.placeholder),1)])),_:1})),y.show&&("always"===f.clearButton||"auto"===f.clearButton&&""!==y.searchVal)&&!f.readonly?(t(),s(_,{key:2,class:"uni-searchbar__box-icon-clear",onClick:g.clear},{default:r((()=>[n(e.$slots,"clearIcon",{},(()=>[c(b,{color:"#c0c4cc",size:"20",type:"clear"})]),!0)])),_:3},8,["onClick"])):h("",!0)])),_:3},8,["style","onClick"]),"always"===f.cancelButton||y.show&&"auto"===f.cancelButton?(t(),s(w,{key:0,onClick:g.cancel,class:"uni-searchbar__cancel"},{default:r((()=>[u(i(g.cancelTextI18n),1)])),_:1},8,["onClick"])):h("",!0)])),_:3})}],["__scopeId","data-v-314f636a"]]),M=$({__name:"cl-auto-page-list",props:{lowerThreshold:{type:[Number,String],default:50},pageSize:{type:Number,default:20},params:{type:Object,default:()=>({})},fillterFun:Function,list:{type:Array,default:()=>[]},delay:{type:Number,default:500},emptyIconColor:{type:String,default:"#4c98f0"},emptyText:{type:String,default:"暂无数据"}},setup(e,{expose:a}){const o=e,p=f([]);v((()=>o.list),(e=>{p.value=e}),{immediate:!0,deep:!0});const w=y((()=>{let e=`<svg t="1745376550584" class="icon" viewBox="0 0 1575 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n\t\t\tp-id="2958" id="mx_n_1745376550586" width="100%" height="100%">\n\t\t\t<path\n\t\t\t\td="M157.479601 699.632818h21.200994a10.474488 10.474488 0 0 1 10.285475 10.442986 10.316977 10.316977 0 0 1-10.285475 10.442986H157.479601v21.106488a10.474488 10.474488 0 0 1-10.505991 10.22247 10.364231 10.364231 0 0 1-10.490239-10.238221v-21.090737H115.266625a10.474488 10.474488 0 0 1-10.285475-10.442986c0-5.764906 4.520569-10.442986 10.285475-10.442986h21.216746V678.557832a10.474488 10.474488 0 0 1 10.490239-10.238222c5.796409 0 10.505991 4.489066 10.505991 10.238222v21.106488z m1385.751182-83.528138v-21.106488a10.238222 10.238222 0 0 0-10.490239-10.238222 10.474488 10.474488 0 0 0-10.505991 10.238222v21.106488h-21.200994a10.364231 10.364231 0 0 0-10.285475 10.442986c0 5.591644 4.615075 10.427235 10.285475 10.427235h21.200994v21.106488c0 5.733404 4.709582 10.238222 10.505991 10.238221 5.717653 0 10.395733-4.567822 10.490239-10.238221v-21.106488h21.216746a10.316977 10.316977 0 0 0 10.285475-10.427235 10.474488 10.474488 0 0 0-10.285475-10.442986h-21.216746zM780.483267 960.69172H251.891756c-5.560142 0-10.899768-2.205155-14.821795-6.111431a20.744212 20.744212 0 0 1-6.111431-14.774541c0-11.529813 9.513671-20.885972 20.948977-20.885973h95.199711a82.661827 82.661827 0 0 1-11.167537-41.661686V271.391631c0-22.146061 8.883626-43.394309 24.650487-59.050913a84.158182 84.158182 0 0 1 59.428939-24.382719h62.894184v-20.980479c0.015751-22.161812 8.883626-43.41006 24.650488-59.066663a84.158182 84.158182 0 0 1 59.428939-24.366968h503.736258a84.110929 84.110929 0 0 1 59.444691 24.366968 83.213116 83.213116 0 0 1 24.634736 59.066663v605.866458a82.693329 82.693329 0 0 1-11.183288 41.661687h116.132936a20.901723 20.901723 0 1 1 0.031502 41.771945H1007.834793v20.980479a82.693329 82.693329 0 0 1-11.183288 41.661686h11.246292a20.870221 20.870221 0 1 1 0 41.771945h-110.462536a41.488425 41.488425 0 0 1-6.457955 50.860335 42.008211 42.008211 0 0 1-59.381686 0l-51.112353-50.860335z m76.75516-41.771945h66.784708a41.740442 41.740442 0 0 0 41.819198-41.866451V270.415062a40.543358 40.543358 0 0 0-40.527607-40.685118h-506.87073a40.606362 40.606362 0 0 0-40.511855 40.685118v606.638262c0 23.12263 18.901332 41.866451 41.803446 41.866451h318.723718l-10.789511-10.742257a41.535678 41.535678 0 0 1-10.915519-40.370096l-19.814897-19.736141c-61.760104 45.725473-148.53297 36.306309-198.936523-21.579021a145.666268 145.666268 0 0 1 6.96199-198.905021c54.483091-54.388584 141.980508-57.586059 200.338372-7.324266a145.650517 145.650517 0 0 1 21.327004 198.274976l19.846399 19.736142a41.99246 41.99246 0 0 1 40.57486 10.836763l70.186947 69.808921z m150.580615-104.429861h63.193454a41.897953 41.897953 0 0 0 41.803447-41.756193V167.072027a41.740442 41.740442 0 0 0-41.803447-41.756193H566.693447a41.897953 41.897953 0 0 0-41.787696 41.756193v20.885972h398.849615a84.110929 84.110929 0 0 1 59.44469 24.382719 83.213116 83.213116 0 0 1 24.634737 59.066664v543.098283zM267.721622 47.001313h31.281705c8.820622 0 15.955875 6.961991 15.955875 15.672355 0 8.64736-7.135253 15.656604-15.955875 15.656604h-31.281705v31.124194c0 8.773368-6.993493 15.877119-15.75111 15.877119a15.908621 15.908621 0 0 1-11.183289-4.693831 15.719608 15.719608 0 0 1-4.567822-11.183288V78.31452H204.921945a15.861368 15.861368 0 0 1-11.246293-4.536319 15.688106 15.688106 0 0 1-4.709582-11.120284c0-8.663111 7.135253-15.672355 15.955875-15.672355h31.281705V15.877119c0-8.773368 6.993493-15.877119 15.75111-15.877119 8.694613 0 15.75111 7.088 15.751111 15.877119v31.108443zM20.99623 939.805748c0-11.529813 9.513671-20.885972 20.933226-20.885973h126.103389a20.870221 20.870221 0 1 1 0 41.771945H41.929456c-5.560142 0-10.899768-2.205155-14.837546-6.111431a20.744212 20.744212 0 0 1-6.09568-14.774541z m662.145175-134.987016a104.051835 104.051835 0 0 0 27.170665-100.885861 104.713381 104.713381 0 0 0-74.234982-73.841205 105.374928 105.374928 0 0 0-101.437151 27.028905 104.051835 104.051835 0 0 0 0 147.698161 105.390679 105.390679 0 0 0 148.501468 0zM461.917061 313.273833a20.948977 20.948977 0 0 1 20.980479-20.885972h230.974281a20.948977 20.948977 0 0 1 20.99623 20.885972 20.948977 20.948977 0 0 1-20.99623 20.885972H482.929042a20.99623 20.99623 0 0 1-14.853297-6.09568 20.759963 20.759963 0 0 1-6.142933-14.806043z m0 104.429861c0-11.545564 9.340408-20.901723 20.85447-20.901723h336.238952a20.870221 20.870221 0 1 1 0 41.771944H482.771531c-5.560142 0-10.868266-2.205155-14.790293-6.127182a20.696959 20.696959 0 0 1-6.064177-14.75879z m0 104.41411c0-11.529813 9.371911-20.885972 20.948977-20.885972h147.068117a20.870221 20.870221 0 1 1 0 41.771945h-147.052366c-5.575893 0-10.915519-2.189404-14.853297-6.111431a20.744212 20.744212 0 0 1-6.111431-14.774542zM63.004441 396.801971a63.051695 63.051695 0 0 1-54.546095-31.313207 62.374397 62.374397 0 0 1 0-62.657917 63.051695 63.051695 0 0 1 54.546095-31.34471c34.794203 0 63.004441 28.068479 63.004441 62.673668s-28.210239 62.642166-63.004441 62.642166z m0-31.313207c11.246293 0 21.657777-5.985422 27.280923-15.672355a31.187198 31.187198 0 0 0 0-31.328959 31.533723 31.533723 0 0 0-27.280923-15.656603c-17.389226 0-31.502221 14.018488-31.50222 31.328958 0 17.294719 14.112995 31.313207 31.50222 31.328959z m1301.782014-93.986876c-34.794203 0-63.004441-28.052727-63.004441-62.657916s28.210239-62.657917 63.004441-62.657917c34.778452 0 62.98869 28.052727 62.98869 62.657917s-28.194487 62.657917-63.004441 62.657916z m0-31.328958c11.246293 0 21.642026-5.969671 27.280923-15.656604a31.187198 31.187198 0 0 0 0-31.344709 31.533723 31.533723 0 0 0-27.280923-15.656604c-17.389226 0-31.502221 14.018488-31.502221 31.34471 0 17.278968 14.112995 31.313207 31.502221 31.313207z"\n\t\t\t\tfill="${o.emptyIconColor}" p-id="2959"></path>\n\t\t</svg>`;return`data:image/svg+xml,${encodeURIComponent(e)}`})),V=f([]),S=f(!1),k=f(!1),z=f(0),C=f(0),$=f("loading"),F=f(1),H=async e=>{if("refresh"!==e&&($.value="loading"),await j(o.delay),0===p.value.length)$.value="noData";else{let e=(F.value-1)*o.pageSize,a=e+o.pageSize,l=p.value.slice(e,a);console.log(p,e,a),V.value=V.value.concat(l),V.value.length===p.value.length?($.value="noMore",S.value=!0):$.value="more"}k.value=!1},I=()=>{k.value=!0,S.value=!1,F.value=1,V.value=[],$.value="none",H("refresh")},M=e=>{C.value=e.detail.scrollTop},N=()=>{console.log(123),S.value||(F.value++,$.value="loading",H())};g((()=>{H()})),a({reset:()=>{S.value=!1,F.value=1,z.value=C.value,x((()=>{z.value=0})),p.value=o.list,H()},search:()=>{p.value=o.list.filter((e=>o.fillterFun?o.fillterFun(e):A(e))),console.log(p.value,"filterList.value"),F.value=1,S.value=!1,V.value=[],H()}});const j=(e=500)=>new Promise((a=>{setTimeout((()=>{a()}),e)})),A=e=>{for(let a in o.params){let l=o.params[a];"string"!=typeof l&&(l=l.toString());let t=e[a];if("string"!=typeof t&&(t=t.toString()),!t.includes(l))return!1}return!0};return(a,o)=>{const p=T(l("uni-load-more"),B),f=b,v=m,y=d,g=_;return t(),s(g,{style:{height:"100%"},"scroll-y":!0,"scroll-top":z.value,"refresher-triggered":k.value,"refresher-enabled":!0,"lower-threshold":e.lowerThreshold,onScroll:M,onScrolltolower:N,onRefresherrefresh:I},{default:r((()=>[n(a.$slots,"list",{list:V.value},void 0,!0),["loading","noMore","more"].includes($.value)?(t(),s(p,{key:0,status:$.value},null,8,["status"])):h("",!0),"noData"===$.value?n(a.$slots,"empty",{key:1},(()=>[c(y,{class:"empty_box"},{default:r((()=>[c(f,{class:"empty_box_image",src:w.value,mode:"aspectFit"},null,8,["src"]),c(v,{class:"empty_box_text"},{default:r((()=>[u(i(e.emptyText),1)])),_:1})])),_:1})]),!0):h("",!0)])),_:3},8,["scroll-top","refresher-triggered","lower-threshold"])}}},[["__scopeId","data-v-19cfc7aa"]]),N=$({__name:"index",setup(e){const a=w({label:""}),o=Array.from({length:60},((e,a)=>({label:`我是展示的值${a}`,value:`value${a}`}))),n=f(),h=()=>{n.value.search()};return(e,p)=>{const m=T(l("uni-search-bar"),I),f=d,v=T(l("cl-auto-page-list"),M);return t(),s(f,{class:"cl_flex_page"},{default:r((()=>[c(m,{modelValue:a.label,"onUpdate:modelValue":p[0]||(p[0]=e=>a.label=e),style:{"background-color":"#fff"},placeholder:"请输入关键字查询",onConfirm:h},null,8,["modelValue"]),c(v,{class:"list_box",list:z(o),ref_key:"clAutoPageListRef",ref:n,params:a},{list:r((({list:e})=>[(t(!0),V(k,null,S(e,((e,a)=>(t(),s(f,{class:"list_box_item",key:a},{default:r((()=>[u(i(e.label),1)])),_:2},1024)))),128))])),_:1},8,["list","params"])])),_:1})}}},[["__scopeId","data-v-5bf093b2"]]);export{N as default};

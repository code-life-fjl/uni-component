import{r as e,h as l,G as a,j as t,a as u,b as o,k as s,w as i,z as n,e as c,t as d,c as r,B as p,F as v,d as m,W as _,v as f,i as b,q as y}from"./index-DP-g-T74.js";import{_ as g}from"./uni-icons.DQjyCcaB.js";import{_ as h,r as k,b as x}from"./_plugin-vue_export-helper.BJC6Dhmg.js";import{_ as F}from"./uni-easyinput.BVyo58vL.js";import{_ as V}from"./uni-popup.Cq3DvJ8h.js";const S=h({__name:"cl-more-select-picker",props:{options:{type:Array,default:()=>[]},modelValue:{type:Array,default:()=>[]},placeholder:{type:String,default:"请选择"},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},interval:{type:String,default:"、"},hideBorder:{type:Boolean,default:!1},emptyText:{type:String,default:"暂无数据"},disabled:{type:Boolean,default:!1},selectTarget:{type:String,default:"row"},isFilter:{type:Boolean,default:!0},maxLength:{type:Number,default:void 0}},emits:["update:modelValue","cancel","submit","clear","change"],setup(h,{emit:x}){const S=h,j=(e,l)=>`[object ${e}]`===Object.prototype.toString.call(l),C=x,B=e([]),L=e([]),N=e("");l((()=>S.options),(()=>{B.value=S.options.map((e=>j("Number",e)||j("String",e)?{[S.labelField]:e,[S.valueField]:e}:e)),L.value=B.value,N.value=""}),{deep:!0,immediate:!0}),l((()=>N.value),(e=>{L.value=B.value.filter((e=>e[S.labelField].includes(N.value))),console.log(L.value)}),{deep:!0,immediate:!0});const T=e([]),w=a((()=>S.modelValue.length>0?B.value.filter((e=>S.modelValue.includes(e[S.valueField]))).map((e=>e[S.labelField])).join(S.interval):S.placeholder)),z=a((()=>{var e;return(null==(e=S.modelValue)?void 0:e.length)>0})),A=()=>{console.log(123213),C("update:modelValue",[])},I=()=>{T.value=[],U.value.close(),C("cancel")},O=()=>{C("update:modelValue",T.value),U.value.close(),T.value=[],C("submit",T.value)},J=(e,l)=>{if("checkbox"===S.selectTarget&&"checkbox"!==l)return;const a=T.value.findIndex((l=>l===e[S.valueField]));-1!==a||"number"!=typeof S.maxLength||T.value.length!==S.maxLength?(a>-1?T.value.splice(a,1):T.value.push(e[S.valueField]),C("change",e,-1===a,T.value)):f({title:`最多只能选择${S.maxLength}条数据`,icon:"none",duration:500})},U=e(),$=()=>{N.value="",T.value=JSON.parse(JSON.stringify(S.modelValue)),U.value.open()};return(e,l)=>{const a=b,f=k(t("uni-icons"),g),x=y,j=k(t("uni-easyinput"),F),C=k(t("uni-popup"),V);return u(),o(v,null,[s(a,{class:"cl_more_select_piker"},{default:i((()=>[s(a,{class:n(["input_box",{hideBorder:h.hideBorder,disabled:h.disabled}])},{default:i((()=>[s(a,{class:n(["input_ele",{placeholder:!z.value}]),onClick:$},{default:i((()=>[c(d(z.value?w.value:S.placeholder),1)])),_:1},8,["class"]),z.value?(u(),r(f,{key:0,class:"clear_icon",type:"clear",size:24,color:"#c0c4cc",onClick:A})):(u(),r(f,{key:1,class:"clear_icon",type:"bottom",size:20,color:"#c0c4cc"}))])),_:1},8,["class"])])),_:1}),s(C,{ref_key:"popupRef",ref:U,type:"bottom"},{default:i((()=>[s(a,{class:"btn_box"},{default:i((()=>[s(x,{class:"cancel_btn",onClick:I},{default:i((()=>[c("取消")])),_:1}),h.isFilter?(u(),r(j,{key:0,style:{margin:"0 20rpx"},modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=e=>N.value=e),placeholder:"请输入关键字查询"},null,8,["modelValue"])):p("",!0),s(x,{class:"submit_btn",onClick:O},{default:i((()=>[c("确定")])),_:1})])),_:1}),L.value.length>0?(u(),r(a,{key:0,class:"scoll_box"},{default:i((()=>[(u(!0),o(v,null,m(L.value,((e,l)=>(u(),r(a,{key:l,class:"scoll_box_item",onClick:l=>J(e,"row")},{default:i((()=>[s(x,null,{default:i((()=>[c(d(e[h.labelField]),1)])),_:2},1024),s(a,{class:n(["select_icon",{active:T.value.includes(e[h.valueField])}]),onClick:_((l=>J(e,"checkbox")),["stop"])},{default:i((()=>[T.value.includes(e[h.valueField])?(u(),r(x,{key:0},{default:i((()=>[c("√")])),_:1})):p("",!0)])),_:2},1032,["class","onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})):(u(),r(a,{key:1,class:"empty_box"},{default:i((()=>[c(d(h.emptyText),1)])),_:1}))])),_:1},512)],64)}}},[["__scopeId","data-v-cb52ee3d"]]),j=h({__name:"index",setup(l){const a=e([]),o=e([]);return x((()=>{o.value=Array.from({length:100},((e,l)=>({label:"我是label"+(l+1),value:l+1})))})),(e,l)=>{const n=k(t("cl-more-select-picker"),S),c=b;return u(),r(c,{class:"content"},{default:i((()=>[s(n,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),options:o.value},null,8,["modelValue","options"])])),_:1})}}},[["__scopeId","data-v-0f4b5823"]]);export{j as default};

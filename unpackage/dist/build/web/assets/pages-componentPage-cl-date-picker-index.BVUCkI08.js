import{m as e,u as l,g as a,r as t,G as s,j as o,a as u,b as n,k as d,l as i,p,w as r,e as c,F as f,d as m,c as v,t as h,H as _,q as Y,i as y,P as g,s as k}from"./index-BZI3g_NT.js";import{_ as D}from"./uni-section.BUjnShyN.js";import{_ as M,r as V}from"./_plugin-vue_export-helper.CVF5zBYs.js";import{_ as b}from"./cl-input.tz2ECT4L.js";import{_ as w}from"./uni-popup.BXMkzMcE.js";import"./uni-icons.BJDLfPPo.js";const x=M({__name:"cl-date-picker",props:e({dateType:{type:String,default:"YYYY-MM-DD"},placeholder:{type:String,default:"请选择"},clearable:{type:Boolean,default:!0},yearOptions:{type:Array,default:()=>[]},isNow:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:e(["cancel","submit"],["update:modelValue"]),setup(e,{expose:D,emit:M}){const x=e,I=l(),j=a(e,"modelValue"),E=M,T=t(),R=t([]),C=t([]),O={YYYY:"年",MM:"月",DD:"日",hh:"时",mm:"分",ss:"秒"},P=e=>e>=10?e+"":"0"+e,U=s((()=>x.dateType.match(/(YYYY|MM|DD|hh|mm|ss)/g)||[])),B=s((()=>x.modelValue.match(/(\d{4}|\d{2}|\d{2}|\d{2}|\d{2}|\d{2})/g)||[])),F=e=>{const{value:l}=e.detail;console.log(e,"detail"),console.log(U.value,"dateTypetList");const a=U.value.findIndex((e=>"YYYY"===e)),t=U.value.findIndex((e=>"MM"===e)),s=U.value.findIndex((e=>"DD"===e));if(t>-1&&s>-1){let e=Date.now().getFullYear();if(a>-1){e=l[a];const t=new Date(e,month,0).getDate();console.log(t,"days")}C.value=l}else C.value=l},S=()=>{E("cancel"),T.value.close()},H=()=>{let e=x.dateType;U.value.forEach(((l,a)=>{const t=new RegExp(l),s=R.value.find((e=>e.type===l));console.log(s,"curOption");const o=s.options[C.value[a]];e=e.replace(t,o)})),E("submit",e),j.value=e,T.value.close()},N=()=>{if(!x.disabled){if((()=>{if(R.value=[],0===U.value.length)throw new Error("传入的时间格式无法识别到有效值，有效值包含：YYYY,MM,DD,hh,mm,ss");U.value.forEach(((e,l)=>{let a=[];if("YYYY"===e)if(0===x.yearOptions.length)for(let t=1990;t<=2050;t++)a.push(t+"");else a=x.yearOptions;if("MM"===e)for(let t=1;t<=12;t++)a.push(P(t));if("DD"===e)for(let t=1;t<=31;t++)a.push(P(t));if("hh"===e)for(let t=0;t<=23;t++)a.push(P(t));if("mm"===e||"ss"===e)for(let t=0;t<=59;t++)a.push(P(t));R.value.push({type:e,options:a})}))})(),null===(e=x.modelValue)||""===e||void 0===e)if(x.isNow){let e=[];const l=(()=>{const e=new Date;return{YYYY:e.getFullYear()+"",MM:P(e.getMonth()+1),DD:P(e.getDate()),hh:P(e.getHours()),mm:P(e.getMinutes()),ss:P(e.getSeconds())}})();U.value.forEach((a=>{let t=R.value.find((e=>e.type===a)).options.findIndex((e=>e===l[a]));e.push(t)})),C.value=e}else C.value=[];else _((()=>(C.value=[],void U.value.forEach(((e,l)=>{const a=R.value.find((l=>l.type===e)).options.findIndex((e=>e===B.value[l]));C.value.push(a)})))));var e;T.value.open()}};return D({close:()=>{T.value.close()},open:N}),(l,a)=>{const t=V(o("cl-input"),b),s=Y,_=y,D=g,M=k,x=V(o("uni-popup"),w);return u(),n(f,null,[d(t,i({modelValue:j.value,"onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),inputType:"falseInput",placeholder:e.placeholder,disabled:e.disabled},p(I),{onInputClick:N}),null,16,["modelValue","placeholder","disabled"]),d(x,{type:"bottom",ref_key:"popupRef",ref:T},{default:r((()=>[d(_,{class:"btn_box"},{default:r((()=>[d(s,{onClick:S},{default:r((()=>[c("取消")])),_:1}),d(s,{class:"submit",onClick:H},{default:r((()=>[c("确认")])),_:1})])),_:1}),d(M,{class:"picker-view",value:C.value,onChange:F,"mask-class":"mask_class"},{default:r((()=>[(u(!0),n(f,null,m(R.value,((e,l)=>(u(),v(D,{key:l},{default:r((()=>[(u(!0),n(f,null,m(e.options,((l,a)=>(u(),v(_,{class:"item",key:a},{default:r((()=>[c(h(l)+" "+h(O[e.type]),1)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1},8,["value"])])),_:1},512)],64)}}},[["__scopeId","data-v-2e42b8de"]]),I=M({__name:"index",setup(e){const l=t(),a=t("12:12:12"),s=t(),n=t();return(e,t)=>{const i=y,p=V(o("uni-section"),D),f=V(o("cl-date-picker"),x);return u(),v(i,{class:"content"},{default:r((()=>[d(i,{class:""},{default:r((()=>[c(" 使用picker-view和picker-view-column封装的时间选择器，支持年月日时分秒各种形式的组合搭配。 ")])),_:1}),d(p,null,{default:r((()=>[c("基础使用")])),_:1}),d(f,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),ref_key:"datePickerRef",ref:n},null,8,["modelValue"]),d(p,null,{default:r((()=>[c("切换时间格式")])),_:1}),d(f,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),ref_key:"datePickerRef",ref:n,dateType:"hh:mm:ss"},null,8,["modelValue"]),d(p,null,{default:r((()=>[c("禁用状态")])),_:1}),d(f,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),ref_key:"datePickerRef",ref:n,disabled:""},null,8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-8544e0fe"]]);export{I as default};

import{_ as e}from"./uni-section.BUjnShyN.js";import{m as l,$ as a,g as d,G as t,r as n,h as r,j as s,N as o,a as u,b as i,k as c,w as p,F as f,d as y,c as m,z as h,A as v,y as x,B as _,e as b,t as w,J as K,p as T,a0 as A,a1 as g,a2 as R,q as H,i as F}from"./index-BZI3g_NT.js";import{_ as E,r as k}from"./_plugin-vue_export-helper.CVF5zBYs.js";import{_ as W}from"./uni-icons.BJDLfPPo.js";const j={name:"ClTableRow"},B=E(Object.assign(j,{props:l({columns:{type:Array,default:()=>[]},curRow:{type:Object,default:()=>({})},border:{type:Boolean,default:!0},isTableTree:{type:Boolean,default:!1},childrenField:{type:String,default:"children"},level:Number,offsetWidth:{type:Number,default:20},defaultExpandAll:{type:Boolean,default:!1},rowKey:{type:String,default:"id"},overHidden:{type:Boolean,default:!1}},{expandKeys:{type:Array,default:()=>[]},expandKeysModifiers:{}}),emits:["update:expandKeys"],setup(e){const l=e,E=a(),j=d(e,"expandKeys"),B=t((()=>l.curRow[l.rowKey])),S=n(!1);r((()=>j.value),(e=>{e.includes(B.value)&&(S.value=!0)}),{deep:!0,immediate:!0});const $=t((()=>{if(l.isTableTree&&Array.isArray(l.curRow[l.childrenField])&&l.curRow[l.childrenField].length>0)return!0})),N=t((()=>l.isTableTree&&S.value)),U=()=>{!1===S.value?j.value.push(B.value):j.value=j.value.filter((e=>e!==B.value)),S.value=!S.value};return(a,d)=>{const t=k(s("uni-icons"),W),n=H,r=F,B=o("ClTableRow",!0);return u(),i(f,null,[c(r,{class:"row"},{default:p((()=>[(u(!0),i(f,null,y(e.columns,((d,s)=>(u(),m(r,{key:d.prop,class:h([e.border&&"border","row_cell",e.overHidden&&"exceed_omit_1"]),style:v({...d.style})},{default:p((()=>[0===s?x(a.$slots,d.prop,{key:0,row:e.curRow,column:d,text:e.curRow[d.prop]},(()=>[c(r,{class:h([e.overHidden&&"exceed_omit_1"]),style:v({paddingLeft:($.value?0:e.level*l.offsetWidth)+"rpx"})},{default:p((()=>[$.value?(u(),m(t,{key:0,type:S.value?"bottom":"right",class:"expand_icon",onClick:U,style:v({paddingLeft:e.level*l.offsetWidth+"rpx"})},null,8,["type","style"])):_("",!0),c(n,null,{default:p((()=>[b(w(e.curRow[d.prop]),1)])),_:2},1024)])),_:2},1032,["class","style"])]),!0):x(a.$slots,d.prop,{key:1,row:e.curRow,column:d,text:e.curRow[d.prop]},(()=>[c(n,{class:h([e.overHidden&&"exceed_omit_1"])},{default:p((()=>[b(w(e.curRow[d.prop]),1)])),_:2},1032,["class"])]),!0)])),_:2},1032,["class","style"])))),128))])),_:3}),c(R,{name:"slide"},{default:p((()=>[N.value?(u(),m(r,{key:0},{default:p((()=>[(u(!0),i(f,null,y(e.curRow[e.childrenField],(t=>(u(),m(B,{key:t[l.rowKey],columns:e.columns,curRow:t,border:e.border,defaultExpandAll:e.defaultExpandAll,isTableTree:e.isTableTree,childrenField:e.childrenField,level:e.level+1,expandKeys:j.value,"onUpdate:expandKeys":d[0]||(d[0]=e=>j.value=e),offsetWidth:e.offsetWidth,overHidden:e.overHidden},K({_:2},[y(T(E),((e,l)=>({name:l,fn:p((e=>[x(a.$slots,l,A(g(e)),void 0,!0)]))})))]),1032,["columns","curRow","border","defaultExpandAll","isTableTree","childrenField","level","expandKeys","offsetWidth","overHidden"])))),128))])),_:3})):_("",!0)])),_:3})],64)}}}),[["__scopeId","data-v-7a89001f"]]),S=E({__name:"cl-table",props:l({data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},headerStyle:{type:Object,default:()=>({})},rowKey:{type:String,default:"id"},border:{type:Boolean,default:!0},isTableTree:{type:Boolean,default:!1},childrenField:{type:String,default:"children"},offsetWidth:{type:Number,default:20},defaultExpandAll:{type:Boolean,default:!1},overHidden:{type:Boolean,default:!1}},{expandKeys:{type:Array,default:()=>[]},expandKeysModifiers:{}}),emits:["update:expandKeys"],setup(e){const l=a(),t=e,n=d(e,"expandKeys");return r((()=>t.defaultExpandAll),(e=>{e&&(n.value=((e,l="children")=>{const a=[];return function e(d){if(Array.isArray(d)&&0!==d.length)for(const t of d){const d=t[l];Array.isArray(d)&&d.length>0&&(void 0!==t.id&&a.push(t.id),e(d))}}(e),a})(t.data))}),{immediate:!0,deep:!0}),(a,d)=>{const t=H,r=F;return u(),m(r,{class:h(["table",e.border&&"border"])},{default:p((()=>[c(r,{class:"table_header",style:v(e.headerStyle)},{default:p((()=>[(u(!0),i(f,null,y(e.columns,(l=>(u(),m(r,{key:l.prop,class:"table_header_cell",style:v(l.style||{})},{default:p((()=>[x(a.$slots,l.prop+"-header",{column:l},(()=>[c(t,{class:h([e.overHidden&&"exceed_omit_1"])},{default:p((()=>[b(w(l.label),1)])),_:2},1032,["class"])]),!0)])),_:2},1032,["style"])))),128))])),_:3},8,["style"]),c(r,{class:"table_body"},{default:p((()=>[(u(!0),i(f,null,y(e.data,(t=>(u(),m(B,{expandKeys:n.value,"onUpdate:expandKeys":d[0]||(d[0]=e=>n.value=e),key:t[e.rowKey],columns:e.columns,curRow:t,border:e.border,isTableTree:e.isTableTree,childrenField:e.childrenField,level:0,offsetWidth:e.offsetWidth,defaultExpandAll:e.defaultExpandAll,overHidden:e.overHidden,rowKey:e.rowKey},K({_:2},[y(T(l),((e,l)=>({name:l,fn:p((e=>[x(a.$slots,l,A(g(e)),void 0,!0)]))})))]),1032,["expandKeys","columns","curRow","border","isTableTree","childrenField","offsetWidth","defaultExpandAll","overHidden","rowKey"])))),128))])),_:3})])),_:3},8,["class"])}}},[["__scopeId","data-v-c4ef155f"]]),$=E({__name:"index",setup(l){const a=n([]),d=n([]),t=[{id:"1",name:"电子产品",children:[{id:2,name:"手机",children:[{id:3,name:"智能手机",children:[]},{id:4,name:"功能手机",children:[]}]},{id:5,name:"电脑",children:[{id:6,name:"笔记本",children:[]},{id:7,name:"台式机",children:[]}]}]},{id:8,name:"家居用品",children:[{id:9,name:"家具",children:[{id:10,name:"沙发",children:[]},{id:11,name:"桌椅",children:[]}]},{id:12,name:"家电",children:[{id:13,name:"冰箱",children:[]},{id:14,name:"电视",children:[]}]}]},{id:15,name:"图书音像",children:[]}],r=[{prop:"id",label:"id",style:{flex:"0 0 140rpx",textAlign:"left"}},{prop:"name",label:"名称"}];return(l,n)=>{const o=k(s("uni-section"),e),i=k(s("cl-table"),S),f=H,y=F;return u(),m(y,{class:"content"},{default:p((()=>[c(o,null,{default:p((()=>[b("普通用法")])),_:1}),c(i,{style:{"max-height":"300px"},columns:r,data:t,overHidden:""}),c(o,null,{default:p((()=>[c(f,null,{default:p((()=>[b("表格树")])),_:1})])),_:1}),c(i,{style:{"max-height":"300px"},expandKeys:a.value,"onUpdate:expandKeys":n[0]||(n[0]=e=>a.value=e),columns:r,data:t,isTableTree:"",overHidden:""},null,8,["expandKeys"]),c(y,null,{default:p((()=>[b("展开数据"+w(a.value),1)])),_:1}),c(o,null,{default:p((()=>[c(f,null,{default:p((()=>[b("表格树（默认展开数据）")])),_:1})])),_:1}),c(i,{style:{"max-height":"300px"},expandKeys:d.value,"onUpdate:expandKeys":n[1]||(n[1]=e=>d.value=e),columns:r,data:t,isTableTree:"",overHidden:"",defaultExpandAll:""},null,8,["expandKeys"]),c(y,null,{default:p((()=>[b("展开数据"+w(d.value),1)])),_:1}),c(o,null,{default:p((()=>[c(f,null,{default:p((()=>[b("表格树（表头和内容插槽）")])),_:1})])),_:1}),c(i,{style:{"max-height":"300px"},columns:r,data:t,isTableTree:"",overHidden:"",defaultExpandAll:""},{"id-header":p((({column:e})=>[c(f,{style:{color:"red"}},{default:p((()=>[b("我是"+w(e.label),1)])),_:2},1024)])),name:p((({text:e})=>[c(f,{style:{color:"green"}},{default:p((()=>[b("我使用了插槽："+w(e),1)])),_:2},1024)])),_:1})])),_:1})}}},[["__scopeId","data-v-0c5d9ba8"]]);export{$ as default};

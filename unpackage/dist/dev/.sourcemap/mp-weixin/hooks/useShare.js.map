{"version":3,"file":"useShare.js","sources":["hooks/useShare.js"],"sourcesContent":["// hooks/useGlobalShare.js\r\nimport {\r\n\tgetCurrentInstance,\r\n\tonMounted\r\n} from 'vue';\r\nimport {\r\n\tonShareAppMessage,\r\n\tonShareTimeline\r\n} from '@dcloudio/uni-app'\r\nexport function useShare(customConfig, showmenuConfig) {\r\n\tonMounted(() => {\r\n\t\tuni.showShareMenu({\r\n\t\t\tmenus: [\"shareAppMessage\", \"shareTimeline\"]\r\n\t\t})\r\n\t})\r\n\tconst instance = getCurrentInstance();\r\n\tif (!instance) return;\r\n\tconst pageList = getCurrentPages();\r\n\tconst nowPage = pageList[pageList.length - 1];\r\n\r\n\t// 默认分享配置\r\n\tconst defaultShareConfig = {\r\n\t\ttitle: '默认分享标题',\r\n\t\tpath: '/' + nowPage.route, // 默认分享路径\r\n\t\t// imageUrl: '/static/share-default.png', // 默认分享图片\r\n\t\t// 可根据来源自定义不同分享内容\r\n\t\tgetShareInfo: (res) => {\r\n\t\t\t// res.from 可能是 'button'（页面内分享按钮）或 'menu'（右上角菜单）\r\n\t\t\treturn {\r\n\t\t\t\t...defaultShareConfig\r\n\t\t\t};\r\n\t\t},\r\n\t};\r\n\r\n\t// 合并用户自定义配置\r\n\tconst shareConfig = {\r\n\t\t...defaultShareConfig,\r\n\t\t...customConfig\r\n\t};\r\n\tonShareAppMessage((res) => {\r\n\t\tconsole.log(res);\r\n\t\treturn {\r\n\t\t\ttitle: '243'\r\n\t\t}\r\n\t})\r\n\tonShareTimeline((res) => {\r\n\t\tconsole.log('onShareTimeline', res)\r\n\t})\r\n}"],"names":["onMounted","uni","getCurrentInstance","onShareAppMessage","onShareTimeline"],"mappings":";;AASO,SAAS,SAAS,cAAc,gBAAgB;AACtDA,gBAAAA,UAAU,MAAM;AACfC,kBAAAA,MAAI,cAAc;AAAA,MACjB,OAAO,CAAC,mBAAmB,eAAe;AAAA,IAC7C,CAAG;AAAA,EACH,CAAE;AACD,QAAM,WAAWC,cAAAA;AACjB,MAAI,CAAC;AAAU;AACf,QAAM,WAAW;AACjB,QAAM,UAAU,SAAS,SAAS,SAAS,CAAC;AAG5C,QAAM,qBAAqB;AAAA,IAC1B,OAAO;AAAA,IACP,MAAM,MAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,IAGpB,cAAc,CAAC,QAAQ;AAEtB,aAAO;AAAA,QACN,GAAG;AAAA,MACP;AAAA,IACG;AAAA,EACH;AAGqB,GAAA;AAAA,IACnB,GAAG;AAAA,IACH,GAAG;AAAA,EACF;AACFC,gBAAiB,kBAAC,CAAC,QAAQ;AAC1BF,kBAAAA,MAAY,MAAA,OAAA,2BAAA,GAAG;AACf,WAAO;AAAA,MACN,OAAO;AAAA,IACP;AAAA,EACH,CAAE;AACDG,gBAAe,gBAAC,CAAC,QAAQ;AACxBH,kBAAAA,MAAY,MAAA,OAAA,2BAAA,mBAAmB,GAAG;AAAA,EACpC,CAAE;AACF;;"}
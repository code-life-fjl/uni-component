{"version":3,"file":"cl-more-select-picker.js","sources":["uni_modules/cl-more-select-picker/components/cl-more-select-picker/cl-more-select-picker.vue","../../../soft/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovY29kZS9jb2RlLWxpZmUvdW5pLWFwcC1jb21wb25lbnRzL3VuaV9tb2R1bGVzL2NsLW1vcmUtc2VsZWN0LXBpY2tlci9jb21wb25lbnRzL2NsLW1vcmUtc2VsZWN0LXBpY2tlci9jbC1tb3JlLXNlbGVjdC1waWNrZXIudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"cl_more_select_piker\">\r\n\t\t<view class=\"input_box\" :class=\"{hideBorder, disabled}\">\r\n\t\t\t<view class=\"input_ele\" @click=\"handleOpenPicker\" :class=\"{placeholder: !hasSelect}\">\r\n\t\t\t\t{{hasSelect ? showLabel : props.placeholder}}\r\n\t\t\t</view>\r\n\t\t\t<uni-icons class=\"clear_icon\" v-if=\"hasSelect\" type=\"clear\" :size=\"24\" color=\"#c0c4cc\"\r\n\t\t\t\t@click=\"handleClear\"></uni-icons>\r\n\t\t\t<uni-icons class=\"clear_icon\" v-else type=\"bottom\" :size=\"20\" color=\"#c0c4cc\"></uni-icons>\r\n\t\t</view>\r\n\t</view>\r\n\t<uni-popup ref=\"popupRef\" type=\"bottom\">\r\n\t\t<view class=\"btn_box\">\r\n\t\t\t<text class=\"cancel_btn\" @click=\"handleCancel\">取消</text>\r\n\t\t\t<uni-easyinput v-if=\"isFilter\" style=\"margin: 0 20rpx;\" v-model=\"keywords\" placeholder=\"请输入关键字查询\"></uni-easyinput>\r\n\t\t\t<text class=\"submit_btn\" @click=\"handleSubmit\">确定</text>\r\n\t\t</view>\r\n\t\t<view class=\"scoll_box\" v-if=\"filterList.length > 0\">\r\n\t\t\t<view v-for=\"(item, index) in filterList\" :key=\"index\" class=\"scoll_box_item\" @click=\"handleToggle(item, 'row')\">\r\n\t\t\t\t<text>{{item[labelField]}}</text>\r\n\t\t\t\t<view class=\"select_icon\" :class=\"{active: selectList.includes(item[valueField])}\"\r\n\t\t\t\t\t@click.stop=\"handleToggle(item, 'checkbox')\">\r\n\t\t\t\t\t<text v-if=\"selectList.includes(item[valueField])\">√</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-else class=\"empty_box\">\r\n\t\t\t{{ emptyText }}\r\n\t\t</view>\r\n\t</uni-popup>\r\n</template>\r\n<script setup>\r\n\timport {\r\n\t\tcomputed,\r\n\t\tref,\r\n\t\twatch\r\n\t} from 'vue'\r\n\tconst props = defineProps({\r\n\t\toptions: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => ([])\r\n\t\t},\r\n\t\tmodelValue: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => ([])\r\n\t\t},\r\n\t\tplaceholder: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '请选择'\r\n\t\t},\r\n\t\tlabelField: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'label'\r\n\t\t},\r\n\t\tvalueField: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'value'\r\n\t\t},\r\n\t\tinterval: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '、'\r\n\t\t},\r\n\t\thideBorder: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\temptyText: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '暂无数据'\r\n\t\t},\r\n\t\tdisabled: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// checkbox  点击勾选框  row  点击行数据\r\n\t\tselectTarget: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'row'\r\n\t\t},\r\n\t\tisFilter: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tmaxLength: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: undefined\r\n\t\t}\r\n\t})\r\n\tconst isType = (type, val) => `[object ${type}]` === Object.prototype.toString.call(val)\r\n\tconst emits = defineEmits(['update:modelValue', 'cancel', 'submit', 'clear', 'change'])\r\n\tconst formatList = ref([]) //格式化后的列表，为了应对数组里面不是对象的情况，例如[1,2,3]\r\n\tconst filterList = ref([]) //过滤后的列表\r\n\tconst keywords = ref(\"\")\r\n\twatch(() => props.options, () => {\r\n\t\tformatList.value = props.options.map(item => {\r\n\t\t\tif (isType('Number', item) || isType('String', item)) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t[props.labelField]: item,\r\n\t\t\t\t\t[props.valueField]: item,\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn item\r\n\t\t\t}\r\n\t\t})\r\n\t\tfilterList.value = formatList.value\r\n\t\tkeywords.value = ''\r\n\t}, {\r\n\t\tdeep: true,\r\n\t\timmediate: true\r\n\t})\r\n\twatch(() => keywords.value, (newV) => {\r\n\t\tfilterList.value = formatList.value.filter(item => item[props.labelField].includes(keywords.value))\r\n\t\tconsole.log(filterList.value);\r\n\t}, {\r\n\t\tdeep: true,\r\n\t\timmediate: true\r\n\t})\r\n\t// 弹窗选中的数据\r\n\tconst selectList = ref([])\r\n\t// 显示选中数据的文本\r\n\tconst showLabel = computed(() => {\r\n\t\tif (props.modelValue.length > 0) {\r\n\t\t\treturn formatList.value.filter(item => props.modelValue.includes(item[props.valueField])).map(item => item[\r\n\t\t\t\tprops.labelField]).join(props.interval)\r\n\t\t} else {\r\n\t\t\treturn props.placeholder\r\n\t\t}\r\n\t})\r\n\tconst hasSelect = computed(() => {\r\n\t\treturn props.modelValue?.length > 0\r\n\t})\r\n\r\n\t// 清除操作\r\n\tconst handleClear = () => {\r\n\t\tconsole.log(123213);\r\n\t\temits('update:modelValue', [])\r\n\t}\r\n\t// 取消按钮\r\n\tconst handleCancel = () => {\r\n\t\tselectList.value = []\r\n\t\tpopupRef.value.close()\r\n\t\temits('cancel')\r\n\t}\r\n\t// 确认按钮\r\n\tconst handleSubmit = () => {\r\n\t\temits('update:modelValue', selectList.value)\r\n\t\tpopupRef.value.close()\r\n\t\tselectList.value = []\r\n\t\temits('submit', selectList.value)\r\n\t}\r\n\t// 选中不选择状态切换\r\n\tconst handleToggle = (item, type) => {\r\n\t\tif (props.selectTarget === 'checkbox' && type !== 'checkbox') return\r\n\t\tconst idx = selectList.value.findIndex(itm => itm === item[props.valueField])\r\n\t\t// 判断是不是新目标\r\n\t\tif (idx === -1 && typeof props.maxLength === 'number' && selectList.value.length === props.maxLength) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: `最多只能选择${props.maxLength}条数据`,\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 500\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (idx > -1) {\r\n\t\t\tselectList.value.splice(idx, 1)\r\n\t\t} else {\r\n\t\t\tselectList.value.push(item[props.valueField])\r\n\t\t}\r\n\t\temits('change', item, idx === -1, selectList.value)\r\n\t}\r\n\tconst popupRef = ref()\r\n\tconst handleOpenPicker = () => {\r\n\t\tkeywords.value = ''\r\n\t\tselectList.value = JSON.parse(JSON.stringify(props.modelValue))\r\n\t\tpopupRef.value.open()\r\n\t}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t.input_box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tborder: 1px solid #dcdfe6;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.hideBorder {\r\n\t\tborder: none !important;\r\n\t}\r\n\r\n\t.input_box>.input_ele {\r\n\t\tflex: 1;\r\n\t\tpadding: 0 10px;\r\n\t\tbox-sizing: border-box;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmin-height: 35px;\r\n\t\tword-break: break-all;\r\n\t\tcolor: #333;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.placeholder {\r\n\t\tcolor: #999 !important;\r\n\t\tfont-size: 12px !important;\r\n\t}\r\n\r\n\t.scoll_box {\r\n\t\tpadding: 10rpx 10rpx 20rpx 10rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #fff;\r\n\t\tmin-height: 100px;\r\n\t\tmax-height: 200px;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.scoll_box>.scoll_box_item {\r\n\t\tpadding: 8px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #333;\r\n\t\tborder-bottom: 1px solid ghostwhite;\r\n\t}\r\n\r\n\t.scoll_box_item:last-child {\r\n\t\tborder: none;\r\n\t\tpadding-bottom: 0;\r\n\t}\r\n\r\n\t.empty_box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 100px;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #636363;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.select_icon {\r\n\t\tmargin-left: 20px;\r\n\t\tflex-shrink: 0;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 18px;\r\n\t\theight: 18px;\r\n\t\tborder: 1px solid gainsboro;\r\n\t}\r\n\r\n\t.select_icon.active {\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #007aff;\r\n\t}\r\n\r\n\r\n\t.btn_box {\r\n\t\tpadding: 10px 5px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tborder-bottom: 1px solid ghostwhite;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.cancel_btn {\r\n\t\tpadding: 10rpx;\r\n\t}\r\n\r\n\t.submit_btn {\r\n\t\tpadding: 10rpx;\r\n\t\tcolor: #007aff;\r\n\t}\r\n\r\n\t.disabled {\r\n\t\tbackground-color: #F7F6F6 !important;\r\n\t\tborder-color: #e5e5e5 !important;\r\n\t\tpointer-events: none;\r\n\t}\r\n</style>","import Component from 'D:/code/code-life/uni-app-components/uni_modules/cl-more-select-picker/components/cl-more-select-picker/cl-more-select-picker.vue'\nwx.createComponent(Component)"],"names":["ref","watch","uni","computed"],"mappings":"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"}
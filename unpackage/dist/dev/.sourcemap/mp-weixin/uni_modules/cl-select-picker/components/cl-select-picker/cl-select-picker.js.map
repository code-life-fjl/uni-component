{"version":3,"file":"cl-select-picker.js","sources":["uni_modules/cl-select-picker/components/cl-select-picker/cl-select-picker.vue","../../../soft/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovY29kZS9jb2RlLWxpZmUvdW5pLWFwcC1jb21wb25lbnRzL3VuaV9tb2R1bGVzL2NsLXNlbGVjdC1waWNrZXIvY29tcG9uZW50cy9jbC1zZWxlY3QtcGlja2VyL2NsLXNlbGVjdC1waWNrZXIudnVl"],"sourcesContent":["<template>\r\n\t<cl-input v-model=\"modelValue\" inputType=\"falseInput\" :placeholder=\"placeholder\" :disabled=\"disabled\" v-bind=\"atrrs\"\r\n\t\t@inputClick=\"handleOpen\">\r\n\t</cl-input>\r\n\t<uni-popup type=\"bottom\" ref=\"popupRef\">\r\n\t\t<view class=\"btn_box\">\r\n\t\t\t<text @click=\"cancel\" style=\"padding: 6px;\">取消</text>\r\n\t\t\t<text class=\"submit\" @click=\"submit\" style=\"padding: 6px;\">确认</text>\r\n\t\t</view>\r\n\t\t<picker-view class=\"picker-view\" :value=\"pickValue\" @change=\"selectChange\" mask-class=\"mask_class\">\r\n\t\t\t<picker-view-column>\r\n\t\t\t\t<view class=\"item\" v-for=\"(item, index) in dataList\" :key=\"index\">\r\n\t\t\t\t\t{{ item[props.labelFiled] }}\r\n\t\t\t\t</view>\r\n\t\t\t</picker-view-column>\r\n\t\t</picker-view>\r\n\t</uni-popup>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\twatch,\r\n\t\tref,\r\n\t\tcomputed,\r\n\t\tnextTick,\n\t\tuseAttrs,\r\n\t} from 'vue'\r\n\tconst atrrs = useAttrs()\r\n\tconst emits = defineEmits(['submit', 'clear', 'cancel'])\r\n\tconst props = defineProps({\r\n\t\t// 数据列表\r\n\t\toptions: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t},\r\n\t\t// 输入框提示\r\n\t\tplaceholder: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '请选择',\r\n\t\t},\r\n\t\t\r\n\t\t// 禁用\r\n\t\tdisabled: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\t// 隐藏边框\r\n\t\thideBorder: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\t// 选中数据对象里面用来展示的字段\r\n\t\tlabelFiled: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'label',\r\n\t\t},\r\n\t\t// 选中数据对象里面用来回传的字段\r\n\t\tvalueFiled: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'value',\r\n\t\t},\r\n\t\t// 是否隐藏暂无数据\r\n\t\thideEmptyText: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\temptyText: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '暂无数据',\r\n\t\t},\r\n\t\tplaceholderStyle: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({}),\r\n\t\t},\r\n\t})\r\n\tconst modelValue = defineModel()\r\n\r\n\tconst popupRef = ref()\r\n\tconst handleOpen = () => {\r\n\t\tif (!isEmpty(modelValue.value)) {\r\n\t\t\tdataShow()\r\n\t\t}\r\n\t\tpopupRef.value.open()\r\n\t}\r\n\r\n\r\n\tconst dataList = ref([])\r\n\t// 选中的文本\r\n\t// 选中的value值\r\n\tconst selectText = ref(undefined)\r\n\tconst selectValue = ref(undefined)\r\n\t// 无数据占位符\r\n\tconst noDataValue = '#codeLife_noData#' //用来标识无数据选项\r\n\r\n\tconst handleClear = () => {\r\n\t\tselectText.value = undefined\r\n\t\tselectValue.value = undefined\r\n\t\t// 默认回到第一行\r\n\t\tpickValue.value = [0]\r\n\t\temits('clear')\r\n\t}\r\n\t// 是否为空\r\n\tconst isEmpty = (val) => {\r\n\t\treturn val === '' || val === null || val === undefined\r\n\t}\r\n\r\n\t// 确认选中\r\n\tconst submit = (e) => {\r\n\t\tconst idx = pickValue.value[0]\r\n\t\tconst item = dataList.value[idx]\r\n\t\tconst value = item ? item[props.valueFiled] : undefined\r\n\t\tconst label = item ? item[props.labelFiled] : undefined\r\n\t\tif (\r\n\t\t\t(props.hideEmptyText && dataList.value.length === 0) ||\r\n\t\t\tvalue === noDataValue\r\n\t\t) {\r\n\t\t\tselectText.value = undefined\r\n\t\t\tselectValue.value = undefined\r\n\t\t\temits('submit', undefined)\r\n\t\t} else {\r\n\t\t\tselectText.value = label\r\n\t\t\tselectValue.value = value\r\n\t\t\temits('submit', value, item)\r\n\t\t}\r\n\t\tpopupRef.value.close()\r\n\t}\r\n\tconst cancel = () => {\r\n\t\tpopupRef.value.close()\r\n\t\temit('cancel')\r\n\t}\r\n\r\n\t// 选中数据的下标\r\n\tconst pickValue = ref([0])\r\n\t// 数据回显\r\n\tconst dataShow = () => {\r\n\t\tconst idx = dataList.value.findIndex((item) => item[props.valueFiled] === modelValue.value)\r\n\t\tif (idx > -1) {\r\n\t\t\tpickValue.value = [idx]\r\n\t\t\tconst curData = dataList.value[idx]\r\n\t\t\tselectText.value = curData[props.labelFiled]\r\n\t\t\tselectValue.value = curData[props.valueFiled]\r\n\t\t} else {\r\n\t\t\tselectText.value = undefined\r\n\t\t\tselectValue.value = undefined\r\n\t\t}\r\n\t}\r\n\tconst selectChange = (e) => {\r\n\t\tpickValue.value = e.detail.value\r\n\t}\r\n\r\n\twatch(\r\n\t\t() => props.options,\r\n\t\t(newV) => {\r\n\t\t\t// 无数据的时候是否展示无数据选项\r\n\t\t\tif (newV.length === 0 && !props.hideEmptyText) {\r\n\t\t\t\tdataList.value = [{\r\n\t\t\t\t\t[props.labelFiled]: props.emptyText,\r\n\t\t\t\t\t[props.valueFiled]: noDataValue,\r\n\t\t\t\t}]\r\n\t\t\t} else {\r\n\t\t\t\t// 如果传入的数组是基本数组，如[1,2,3]则转为对象数组\r\n\t\t\t\tdataList.value = props.options.map((item) => {\r\n\t\t\t\t\tif (typeof item !== 'object') {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t[props.labelFiled]: item,\r\n\t\t\t\t\t\t\t[props.valueFiled]: item,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn item\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tdataShow()\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\timmediate: true,\r\n\t\t\tdeep: true,\r\n\t\t}\r\n\t)\r\n\t// 监听数据变化双向绑定\r\n\twatch(\r\n\t\t() => selectValue.value,\r\n\t\t(newV) => {\r\n\t\t\tmodelValue.value = newV\r\n\t\t}\r\n\t)\r\n\r\n\t// 数据回显\r\n\twatch(\r\n\t\t() => modelValue.value,\r\n\t\t(newV) => {\r\n\t\t\tif (isEmpty(newV)) {\r\n\t\t\t\tselectText.value = undefined\r\n\t\t\t\tselectValue.value = undefined\r\n\t\t\t} else {\r\n\t\t\t\tdataShow()\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\timmediate: true,\r\n\t\t}\r\n\t)\r\n</script>\r\n\r\n<style scoped>\r\n\t.input_box {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tborder: 1px solid #dcdfe6;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.hideBorder {\r\n\t\tborder: none !important;\r\n\t}\r\n\r\n\t.input_box>.input_ele {\r\n\t\tflex: 1;\r\n\t\tpadding: 0 10px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmin-height: 35px;\r\n\t\tword-break: break-all;\r\n\t\tcolor: #333;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.input_box>.placeholder {\r\n\t\tcolor: #999;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.clear_icon {\r\n\t\tmargin: 0 5px;\r\n\t}\r\n\r\n\t.picker-view {\r\n\t\twidth: 100%;\r\n\t\theight: 500rpx;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.btn_box {\r\n\t\tpadding: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #fff;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t.btn_box>.submit {\r\n\t\tcolor: #007aff;\r\n\t}\r\n\r\n\t.item {\r\n\t\tflex: 1;\r\n\t\tline-height: 70rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.uni-easyinput__content {\r\n\t\tpointer-events: none;\r\n\t\tbackground-color: #007aff;\r\n\t}\r\n\r\n\t.disabled {\r\n\t\tbackground-color: #F7F6F6;\r\n\t\tpointer-events: none;\r\n\t}\r\n</style>","import Component from 'D:/code/code-life/uni-app-components/uni_modules/cl-select-picker/components/cl-select-picker/cl-select-picker.vue'\nwx.createComponent(Component)"],"names":["useAttrs","_useModel","ref","watch"],"mappings":"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"}